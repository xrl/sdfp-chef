main = Server(
    uuid="<%= @node[:mongrel2][:uuid] %>",
    access_log="/logs/access.log",
    error_log="/logs/error.log",
    chroot="<%= @node[:mongrel2][:chroot] %>",
    default_host="<%= @node[:mongrel2][:hostname] %>",
    name="<%= @node[:mongrel2][:name] %>",
    pid_file="/run/mongrel2.pid",
    port=<%= @node[:mongrel2][:port] %>,
    hosts = [
        Host(name="localhost", routes={
            '/': Dir(base='www/', index_file='index.html',
                     default_ctype='text/html'),
            '/haskell': Handler(send_spec='tcp://127.0.0.1:8000',
                                recv_spec='tcp://127.0.0.1:8001',
                                send_ident='7997ce6e-d5ab-40ce-9536-169c26a11473',
                                recv_ident=''),
            '/clojure': Proxy(addr='127.0.0.1', port=8010) 
        })
    ]
)

servers = [main]

